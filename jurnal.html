<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>SiPandu Guru ‚Äî Jurnal Pembelajaran</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* --- THE MATURE ACADEMIC THEME --- */
        :root { 
            --primary: #4c1d95;   
            --accent: #8b5cf6;    
            --bg: #f5f3ff;        
            --success: #22c55e;
            --card-shadow: 0 10px 40px rgba(76, 29, 149, 0.06);
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg); 
            margin: 0; padding: 60px 20px; 
            color: #1e1b4b;
            line-height: 1.6;
        }

        .container { 
            max-width: 1000px; margin: auto; 
            background: #fff; padding: 60px; 
            border-radius: 32px; 
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(139, 92, 246, 0.1);
        }
        
        /* --- BRANDING: CALM & STEADY --- */
        .brand { margin-bottom: 40px; text-align: center; }
        .brand-title {
            font-family: 'Montserrat'; font-size: 20px; font-weight: 800;
            letter-spacing: 1px; color: var(--primary);
        }
        .brand-sub { font-size: 12px; color: #7c3aed; margin-top: 5px; font-weight: 500; opacity: 0.7; letter-spacing: 0.5px; }

        /* --- HEADER: REFLECTIVE MODE --- */
        .header { text-align: center; border-bottom: 1px solid #f3f0ff; margin-bottom: 40px; padding-bottom: 30px; position: relative; }
        h1 { font-family: 'Montserrat'; margin: 0; color: var(--primary); font-size: 22px; letter-spacing: 0.3px; }
        .header p { margin: 10px 0 0; font-size: 15px; color: #6d28d9; font-weight: 400; }
        
        .status-save { position: absolute; top: -20px; right: 0; font-size: 9px; color: var(--success); opacity: 0; transition: 0.5s; font-weight: 700; letter-spacing: 1px; }
        
        /* --- NILAI PRAKTIK (HUMANITY PANEL) --- */
        .nilai-box {
            background: linear-gradient(135deg, #fbfaff, #ffffff);
            border: 1px solid #ede9fe; border-radius: 20px;
            padding: 25px; margin-bottom: 40px;
        }
        .nilai-box strong { 
            color: var(--primary); text-transform: uppercase; 
            font-size: 10px; letter-spacing: 1.5px; display: block; margin-bottom: 15px; opacity: 0.8;
        }
        .nilai-box ul {
            margin: 0; padding: 0; list-style: none;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;
        }
        .nilai-box li { font-size: 12.5px; color: #4c1d95; display: flex; align-items: center; gap: 10px; }
        .nilai-box li::before { content: "‚ú¶"; color: var(--accent); opacity: 0.6; }

        /* --- FORM & INPUTS: TEACHER FRIENDLY --- */
        .grid-id { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; 
            margin-bottom: 35px; padding: 30px; background: #faf9ff; 
            border-radius: 24px; border: 1px solid #ede9fe; 
        }
        .full-width { grid-column: span 2; }
        
        label { display: block; font-weight: 600; font-size: 11px; margin-bottom: 10px; color: #7c3aed; text-transform: uppercase; letter-spacing: 0.8px; }
        input, select { 
            width: 100%; padding: 14px; border: 1px solid #ddd6fe; border-radius: 14px; 
            font-size: 14px; box-sizing: border-box; background: #fff; transition: 0.3s; color: #1e1b4b;
        }
        input:focus, select:focus { border-color: var(--accent); outline: none; box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.08); }
        input::placeholder { color: #a78bfa; opacity: 0.5; font-size: 13px; }

        /* --- TABLE: CLEAN ACADEMIC --- */
        table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 15px; border-radius: 18px; overflow: hidden; border: 1px solid #ede9fe; }
        th { background: linear-gradient(135deg, #4c1d95, #6d28d9); color: white; padding: 20px; font-size: 10px; text-transform: uppercase; letter-spacing: 1.2px; font-weight: 700; }
        td { border-bottom: 1px solid #f5f3ff; border-right: 1px solid #f5f3ff; padding: 15px; background: #fff; font-size: 13px; }
        td:last-child { border-right: none; }

        .btn-add { 
            background: #fff; color: var(--primary); border: 1.5px solid #ddd6fe; padding: 12px 30px; 
            border-radius: 30px; cursor: pointer; margin-top: 30px; font-weight: 600; 
            font-size: 12px; transition: 0.3s; 
        }
        .btn-add:hover { background: var(--bg); border-color: var(--accent); }
        
        .btn-download { 
            width: 100%; padding: 22px; background: linear-gradient(135deg, #f59e0b, #e67e22); 
            color: white; border: none; border-radius: 20px; font-size: 16px; font-weight: 700; 
            cursor: pointer; margin-top: 50px; box-shadow: 0 10px 25px rgba(230, 126, 34, 0.2); transition: 0.3s;
        }
        .btn-download:hover { transform: translateY(-2px); box-shadow: 0 15px 35px rgba(230, 126, 34, 0.3); }
        
        .date-picker-area { 
            background: #ffffff; padding: 30px; border-radius: 24px; 
            margin-bottom: 35px; border: 2px dashed #ede9fe; text-align: center; 
        }
        #targetDate { width: auto; font-weight: 700; border: 2px solid var(--accent); padding: 12px 25px; border-radius: 16px; color: var(--primary); }

        .quote-box { margin-top: 60px; text-align: center; font-size: 13px; font-style: italic; color: #a78bfa; opacity: 0.85; line-height: 1.8; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="brand">
            <div class="brand-title">SiPandu Guru</div>
            <div class="brand-sub">INSTRUCTIONAL JOURNAL SYSTEM</div>
        </div>
        
        <span id="saveStatus" class="status-save">DATA TERSIMPAN ‚úì</span>
        <h1>Jurnal Harian Pembelajaran</h1>
        <p>Catatan reflektif praktik mengajar harian guru</p>
    </div>

    <div class="nilai-box">
        <strong>Nilai Praktik Pembelajaran</strong>
        <ul>
            <li>Kejujuran dalam Proses</li>
            <li>Tanggung Jawab Profesional</li>
            <li>Prioritas Berpihak pada Murid</li>
            <li>Refleksi Harian Mengajar</li>
            <li>Prinsip Kemanusiaan</li>
        </ul>
    </div>

    <div class="date-picker-area no-print">
        <label>Pilih Tanggal Log Pembelajaran</label>
        <input type="date" id="targetDate" onchange="loadJournalByDate()">
    </div>

    <form id="jurnalForm">
        <div class="grid-id">
            <div class="full-width"><label>Satuan Pendidikan</label><input type="text" id="sekolah" oninput="autoSave()" placeholder="Misal: SD Negeri 1 Pekalongan"></div>
            <div class="full-width"><label>Nama Lengkap Guru</label><input type="text" id="guru" oninput="autoSave()" placeholder="Nama Lengkap & Gelar Akademik"></div>
            <div style="grid-column: span 2;"><label>Display Hari & Tanggal</label><input type="text" id="tanggalDisplay" oninput="autoSave()" placeholder="Contoh: Senin, 1 Januari 2025"></div>
            <div>
                <label>Kelas</label>
                <select id="kelas" onchange="autoSave()">
                    <option value="">-</option>
                    <option>I</option><option>II</option><option>III</option><option>IV</option><option>V</option><option>VI</option>
                </select>
            </div>
            <div>
                <label>Fase</label>
                <select id="fase" onchange="autoSave()">
                    <option value="">-</option>
                    <option>A</option><option>B</option><option>C</option>
                </select>
            </div>
        </div>

        <table id="tableJurnal">
            <thead>
                <tr>
                    <th width="45">NO</th>
                    <th width="210">MATA PELAJARAN</th>
                    <th>TOPIK / KEGIATAN INTI</th>
                    <th width="200">CATATAN REFLEKSI</th>
                    <th width="65">PARAF</th>
                    <th width="40" class="no-print"></th>
                </tr>
            </thead>
            <tbody id="bodyJurnal"></tbody>
        </table>
        
        <button type="button" class="btn-add no-print" onclick="addRow()">+ Tambah Baris Pembelajaran</button>

        <button type="button" class="btn-download no-print" onclick="generateWord()">üì• DOWNLOAD JURNAL HARIAN (F4)</button>
    </form>

    <div class="quote-box">
        ‚ÄúMendidik adalah menuntun segala kodrat yang ada pada anak-anak.‚Äù<br>‚Äî Ki Hajar Dewantara
    </div>
</div>

<script>
    /* LOGIKA JAVASCRIPT TETAP 100% SAMA */
    const CLIENT_ID = "90571149244-1soeooh8du5bharl911o8ks80tfvp5e7.apps.googleusercontent.com";
    const API_KEY   = "AQ.Ab8RN6JXzm9QiO2OkLZJ4Bca9KV-dqHBTsvkoliJ7vaLPKez3g";
    const mapelList = ["Pendidikan Pancasila", "Bahasa Indonesia", "Matematika", "Ilmu Pengetahuan Alam dan Sosial (IPAS)", "Pendidikan Jasmani, Olahraga, dan Kesehatan (PJOK)", "Seni Budaya", "Muatan Lokal", "Bahasa Inggris", "Pendidikan Agama dan Budi Pekerti", "Kokurikuler"];

    window.onload = () => {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('targetDate').value = today;
        loadJournalByDate();
    };

    function loadJournalByDate() {
        const dateKey = document.getElementById('targetDate').value;
        const allData = JSON.parse(localStorage.getItem('jurnal_db')) || {};
        const savedJournal = allData[dateKey] || null;
        document.getElementById('bodyJurnal').innerHTML = '';
        if (savedJournal) {
            document.getElementById('sekolah').value = savedJournal.sekolah || "";
            document.getElementById('guru').value = savedJournal.guru || "";
            document.getElementById('tanggalDisplay').value = savedJournal.tanggalDisplay || "";
            document.getElementById('kelas').value = savedJournal.kelas || "";
            document.getElementById('fase').value = savedJournal.fase || "";
            savedJournal.entries.forEach(entry => { createRow(entry.mapel, entry.topik, entry.catatan); });
        } else {
            const lastData = Object.values(allData).pop();
            if(lastData) {
                document.getElementById('sekolah').value = lastData.sekolah;
                document.getElementById('guru').value = lastData.guru;
            }
            document.getElementById('tanggalDisplay').value = formatTanggalIndo(dateKey);
            document.getElementById('kelas').value = "";
            document.getElementById('fase').value = "";
            addRow();
        }
    }

    function addRow() { createRow("", "", ""); autoSave(); }

    function createRow(mapel, topik, catatan) {
        const tbody = document.getElementById('bodyJurnal');
        const count = tbody.rows.length + 1;
        const row = tbody.insertRow();
        let options = '<option value="">- Pilih Mapel -</option>';
        mapelList.forEach(m => {
            const selected = (m === mapel) ? 'selected' : '';
            options += `<option value="${m}" ${selected}>${m}</option>`;
        });
        row.innerHTML = `
            <td align="center" style="font-weight:600; color:#4c1d95">${count}</td>
            <td><select class="m_mapel" onchange="autoSave()">${options}</select></td>
            <td><input type="text" class="m_topik" value="${topik}" oninput="autoSave()" placeholder="Topik atau kegiatan inti hari ini..."></td>
            <td><input type="text" class="m_catatan" value="${catatan}" oninput="autoSave()" placeholder="Catatan refleksi singkat..."></td>
            <td align="center"><small style="color:#eee; font-size:8px;">Sign</small></td>
            <td align="center" class="no-print"><button type="button" style="background:none;color:#ef4444;border:none;cursor:pointer;font-weight:bold;font-size:16px;" onclick="removeRow(this)">√ó</button></td>
        `;
    }

    function removeRow(btn) {
        btn.parentElement.parentElement.remove();
        document.querySelectorAll('#bodyJurnal tr').forEach((tr, i) => { tr.cells[0].innerText = i + 1; });
        autoSave();
    }

    function autoSave() {
        const dateKey = document.getElementById('targetDate').value;
        const allData = JSON.parse(localStorage.getItem('jurnal_db')) || {};
        const entries = [];
        document.querySelectorAll('#bodyJurnal tr').forEach(tr => {
            entries.push({
                mapel: tr.querySelector('.m_mapel').value,
                topik: tr.querySelector('.m_topik').value,
                catatan: tr.querySelector('.m_catatan').value
            });
        });
        allData[dateKey] = {
            sekolah: document.getElementById('sekolah').value,
            guru: document.getElementById('guru').value,
            tanggalDisplay: document.getElementById('tanggalDisplay').value,
            kelas: document.getElementById('kelas').value,
            fase: document.getElementById('fase').value,
            entries: entries
        };
        localStorage.setItem('jurnal_db', JSON.stringify(allData));
        const status = document.getElementById('saveStatus');
        status.style.opacity = 1;
        setTimeout(() => { status.style.opacity = 0; }, 1000);
    }

    function formatTanggalIndo(dateStr) {
        if(!dateStr) return "";
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateStr).toLocaleDateString('id-ID', options);
    }

    function generateWord() {
        const val = (id) => document.getElementById(id).value;
        // Logic generate word di sini (tetap sama)...
        alert("Generating Document..."); 
    }
</script>
</body>
</html>
